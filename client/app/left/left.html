<aside class="lpanel">

    <!-- TEAM CONTAINER  -->
    <div class="lpanel-team" >
        <span class="lpanel-team__name overflow-ellipsis right_padding dropdown-toggle">
            {{ team.name }}
        </span>
    </div>

    <!-- LIST CONTAINER -->
    <div class="lpanel-list">

        <!-- STARRED CONTAINER  -->
        <div class="lpanel-list__stars" ng-show="entities.stars.length">
            <h2 id="starred_section_header" class="overflow-ellipsis"><span class="glyphicon glyphicon-star"></span> Starred</h2>
        </div>

        <!-- CHANNEL -->
        <div class="lpanel-list__channels">
            <h2 id="channels_header" class="cursor_pointer overflow-ellipsis " ng-click="openModal('join');">
                Channels
                <span class="lpanel-entity_more icon_add_member"></span>
            </h2>
            <ul id="channel-list">
                <li class="channel unread" ng-repeat="joinedChannel in joinedChannelList" ng-class="{active: $state.params.entityId == joinedChannel.id}">
                    <a ui-sref="archives({entityType:'channels',entityId:joinedChannel.id})" class="channel_name" data-channel-id="{{joinedChannel.id}}">
                        <span class="inline-overflow-ellipsis left-panel__name">
                            <span class="prefix">#</span> {{joinedChannel.name}}
                        </span>
                        <span class="badge left-panel_badge green_badge pull-right">{{joinedChannel.alarmCnt}}</span>
                    </a>
                </li>
            </ul>
            <div class="clear-both"></div>
            <a class="channel-list-more lpanel-list__more">
                <div ng-switch="channelsLeft">
                    <span ng-switch-when="0"ng-click="openModal('channel');">Create channel</span>
                    <span ng-switch-default ng-click="openModal('join');">{{channelsLeft}} more...</span>
                </div>
            </a>
        </div>

        <!-- PRIVATE GROUPS -->
        <div class="lpanel-list__groups">
            <h2 id="groups_header" class="hoverable overflow-ellipsis entity_header" ng-click="openModal('private')">
                Private Groups
                <span class="lpanel-entity_more icon_image icon_add_member"></span>
            </h2>
            <ul id="group-list">
                <li class="group cursor_pointer" ng-repeat="group in privateGroupList" ng-class="{active: $state.params.entityId == group.id}">
                    <a ui-sref="archives({entityType:'privateGroups',entityId:group.id})" class="channel_name" data-group-id="{{group.id}}">
                        <!--<i class="fa fa-times-circle group_close"></i>-->
                        <span class="inline-overflow-ellipsis left-panel__name" data-ng-bind="group.name"></span>
                        <span class="badge left-panel_badge green_badge pull-right">{{group.alarmCnt}}</span>

                    </a>
                </li>
            </ul>
            <div class="clear-both"></div>
            <span id="group_list_more" class="lpanel-list__more cursor_pointer" ng-click="openModal('private')">Create private group</span>
        </div>

        <!-- DIRECT MESSAGES    -->
        <div class="lpanel-list__users">
            <h2 id="direct_messages_header" class="hoverable overflow-ellipsis entity_header" data-ng-click="openModal('user')" >
                Direct Messages
                <span class="lpanel-entity_more icon_add_member"></span>
            </h2>
            <ul id="im-list">
                <li class="member away cursor_pointer" ng-repeat="userEntity in visibleUsers = (userList | filter: {'visibility' : 'true'})" ng-class="{active: $state.params.entityId == userEntity.id}">
                    <a ui-sref="archives({entityType:'users',entityId: userEntity.id})" class="im_name not_user_colored channel_name" data-member-id="{{userEntity.id}}">
                        <i class="fa fa-times-circle entity-remove" data-ng-click="userEntity.visibility = false; $event.stopPropagation(); $event.preventDefault();"></i>
                        <span class="inline-overflow-ellipsis left-panel__name">{{userEntity|getFirstLastNameOfUser}}</span>
                        <span class="badge left-panel_badge green_badge pull-right">{{userEntity.alarmCnt}}</span>
                    </a>
                </li>
                <span class="lpanel-list__more cursor_pointer" ng-show="(userList | filter : {'visibility' : false}).length > 0" data-ng-click="openModal('user')">
                    {{ (userList | filter : {'visibility' : false}).length}} more...
                </span>
            </ul>
            <div class="clear-both"></div>
        </div>

    </div>

    <!-- USER INFO CONTAINER -->
    <div class="lpanel-user">
        <span data-toggle="dropdown">
        <img class="lpanel-user__avatar" data-ng-src="{{ server_uploaded + user.u_photoThumbnailUrl.smallThumbnailUrl }}">
        <div class="lpanel-user__container">
            <span class="lpanel-user__name inline-overflow-ellipsis"> {{ user|getFirstLastNameOfUser}} </span>
            <!--<img id="connection_icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABmFBMVEUAAAD////////////////////////////////////2+/LR5bKw1Hmfy1KUxz2VyD2izVKz1nnS5rP////A3JuOw0qKwkCNxD+QxT6Sxj6Txz6SxUnC3Jv1+fGXx2GDvkCGwECIwUCLwj+PxD6PxT+JwUCFwECZyGD2+vGSxWF9vEGAvkGDv0CMwz+Wx2GPw2F4ukJ7u0J+vUGBvkGHwUB8u0KSxGG31pp0uEN3uUJ5u0KFv0CCv0B6u0K415p5uU1yt0N/vUF1uEN8u0zG3bFttURwtkR5ukLH3rGWxnlqtERutUR2uUOZx3l6uVZos0VvtkRxt0Nzt0N8ulVisUVlskVns0VzuENmskVfsEVps0VztlZer0VhsEVjsUVstER1t1aOwXhcrkZdr0VgsEaQwnm/2a9YrUZbrka/2rDz+PFhr09XrEZksE6pzplUq0ZVrEZarUaqzpl0tWJRq0dWrEZ1tmJztWJOqUdSq0dxtGJMqEdNqUdQqkdytWKmzJhXrFBKqEdZrU+716+GvXhjr1dIp0hkr1dYtVOVAAAAFHRSTlMAV8/v/wCH+x/n////////////9kvBHZAAAAG7SURBVHgBvdOxjtNAEIDhGe/MZO3sxVaiIJkiSNdQUPJOeQlqXoCCIg/EU9BQHRKg5CT7ErzrHTa+aBOqaxC/tdLK+2kbj+H/hoWhlCmQr0HeyYxyM8mvkWHKoAfBS6cBWEeYugAzf4QGp1SV8DvU/ZjBdN7iud6hdnOTdl+TuALyrUPEwfdu3nc1ipr9AwdIFZPysJylRDfa6cZL2rfgMd9QjO8R0Y+/u7sa4LHZz4wN/MXEyw1hbK1VZdV7PZ1OyufzktsxXADCW5EkXq06Paan02Uoo3kHmAEzJ8HBN6v5qlkqaxTmCdAzQK8Noi6rXwCrJyutepUMAARnXS++3cvm2xvftR0PzAyQAXtwdNChifvFHppBdR003IDCIg6JDOse4DX8WIdo1TwfpaUgqWC9c4eqqg5HF20QZdAMmDlasdHWkrKR03J0A4iIXRTrpba29laiY8YMyOyMKYkXroyROZZuwVTyztAFJPmZKBGq+FxFVBr5BHr7ubd3GICfAM+88qDHHYe/BmbbIAaGKU/Fz10emDxyHxBhgJTg+DGP3O3QbltMBkd92F2H9sWxB772wo9z2z8FfwDHWbdKLDfq1AAAAABJRU5ErkJggg==" class="" style="opacity: 1;">-->
        </div>
        <!--<span id="connection_status">online</span>-->
        <!--<span class="lpanel-user__more glyphicon glyphicon-chevron-up"></span>-->

        <i class="fa fa-caret-up lpanel-user__more" ></i>
        </span>
        <ul class="dropdown-menu green_dropdown lpanel-user__dropdown" role="menu">
            <li role="presentation"><a data-ng-click="logout()" role="menuitem" tabindex="-1" ng-controller="authController">
                <span class="icon_signout"></span>Sign Out</a>
            </li>
            <li role="presentation"><a data-ng-click="openModal('invite');" role="menuitem" tabindex="-1">
                <i class="fa fa-envelope-o"></i>Invite Others</a>
            </li>
            <li role="presentation"><a data-ng-click="openModal('profile');" role="menuitem" tabindex="-1">
                <i class="fa fa-user"></i>Profile</a>
            </li>

            <li role="presentation"><a data-ng-click="openModal('agreement');" role="menuitem" tabindex="-1">
                이용약관</a>
            </li>
            <li role="presentation"><a data-ng-click="openModal('privacy');" role="menuitem" tabindex="-1">
                개인정보 취급방침</a>
            </li>
        </ul>
    </div>

</aside>

<div ui-view="headerpanel"></div>
<div ui-view="centerpanel" class="cpanel" ng-class="{'rpanel-show': $state.includes('**.files.**')}"></div>
