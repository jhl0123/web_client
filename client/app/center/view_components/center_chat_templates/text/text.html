<!-- main text-->
<div class="text-msg-item-container" ng-if="!isChildText">
  <!--  User Thumbnail -->
  <div class="msg-item-float cursor_pointer" data-ng-click="onUserClick(msg.fromEntity);"
       ng-class="{'center-panel-disabled-member' : isDisabledMember(msg.fromEntity) }">
    <img on-image-load class="user-profile user-thumb"
         ng-src="{{ msg.exProfileImg }}"/>
  </div>

  <div class="msg-item-header"
       ng-class="{'center-panel-disabled-member' : isDisabledMember(msg.fromEntity) }">
    <!--    WRITER-->
    <span class="msg-item-header__name cursor_pointer" data-ng-click="onUserClick(msg.fromEntity);">
      <span class="msg-item-header__nameSpace">
        <span ng-if="msg.message.contentType !== 'file'"> {{msg.fromEntity | getName}}</span>
      </span>
    </span>
  </div>
  <div class="msg-item-body">
    <!-- TEXT -->
    <div class="msg-text">
      <img ng-if="msg.message.contentType === 'sticker'"  class="sticker size_5" src="{{msg.message.content.url}}"/>
      <span ng-if="msg.message.contentType !== 'sticker'"
            class="keep msg-text-body"
            compile="(msg.message.content.body) || ''"></span>
      <span class="msg-item-header__created">
        {{msg.time | gethmmaFormat}}
      </span>
      <span ng-if="msg.status === 'sending'" class="icon-loading-small"></span>
      <span ng-if="msg.status !== 'sending' && msg.unreadCount" class="badge unread-badge">{{ msg.unreadCount }}</span>

      <!-- More -->
      <span class="pull-right msg-item-icon">
        <span class=""
              dropdown
              dropdown-toggle="true">
          <i class="icon-more-fill msg-item__action msg-item-circle msg-item-more cursor_pointer"
             ng-mouseenter="onMouseEnterOnIcon();"
             ng-mouseleave="onMouseLeaveOnIcon();"></i>
          <!--DROP-DOWN-->
          <ul class="dropdown-menu grey_dropdown dropdown-menu-right" role="menu">
            <li role="presentation" tabindex="-1"
                ng-if="::showAnnouncement"
                ng-click="createAnnouncement()">
              <a role="menuitem" tabindex="-1">
                <i class="icon-bullhorn"></i>
                <span translate>@announcement-create</span>
              </a>
            </li>
            <li role="presentation" tabindex="-1"
                ng-click="createAnnouncement()">
              <a role="menuitem" tabindex="-1">
                <i class="icon-star"></i>
                <span translate>@즐겨찾기로-추가</span>
              </a>
            </li>
            <li role="presentation" tabindex="-1"
                ng-if="::isMyMessage"
                ng-click="deleteMessage()">
              <a role="menuitem" tabindex="-1">
                <i class="fa fa-trash msg-item-action-icon"></i>
                <span translate>@message-delete</span>
              </a>
            </li>
          </ul>
        </span>
      </span>

      <!-- Star -->
      <span class="cursor_pointer pull-right msg-item-star msg-item-icon msg-item-circle"
            ng-class="{'off msg-item__action': !msg.isStarred}"
            ng-mouseenter="onMouseEnterOnIcon();"
            ng-mouseleave="onMouseLeaveOnIcon();"
            star-view="msg.isStarred"
            message-id="{{ msg.message.id }}">
        <i class="icon-star-fill"></i>
      </span>

      <!--&lt;!&ndash;    DELETE ICON APPEARS ON HOVER    &ndash;&gt;-->
      <!--<span class="msg-item__action pull-right cursor_pointer"-->
            <!--ng-mouseenter="onMouseEnterOnIcon();"-->
            <!--ng-mouseleave="onMouseLeaveOnIcon();"-->
            <!--ng-if="isMyMessage"-->
            <!--ng-click="deleteMessage()"-->
            <!--tooltip="{{ '@message-delete' | translate }}" tooltip-append-to-body="true">-->
        <!--<i class="fa fa-trash msg-item-action-icon"></i>-->
      <!--</span>-->

      <!--&lt;!&ndash;    ANNOUNCEMENT ICON APPEARS ON HOVER    &ndash;&gt;-->
      <!--<span class="msg-item__action pull-right cursor_pointer icon-bullhorn msg-item-action-icon"-->
            <!--ng-if="showAnnouncement"-->
            <!--ng-mouseenter="onMouseEnterOnIcon();"  ng-mouseleave="onMouseLeaveOnIcon();"-->
            <!--ng-click="createAnnouncement()"-->
            <!--tooltip="{{ '@announcement-create' | translate }}" tooltip-append-to-body="true">-->
      <!--</span>-->


    </div>
  </div>
</div>

<div class="text-msg-item-container" ng-if="isChildText">
  <div class="msg-item-body">
    <!-- TEXT -->
    <div class="msg-text">
      <img ng-if="msg.message.contentType === 'sticker'" class="sticker size_5" src="{{msg.message.content.url}}"/>
      <span ng-if="msg.message.contentType !== 'sticker'"
            class="keep msg-text-body"
            compile="(msg.message.content.body) || ''"></span>
      <span class="msg-item-header__created">
        {{msg.time | gethmmaFormat}}
      </span>
      <span ng-if="msg.status === 'sending'" class="icon-loading-small"></span>
      <span ng-if="msg.status !== 'sending' && msg.unreadCount" class="badge unread-badge">{{ msg.unreadCount }}</span>


      <!-- More -->
      <span class="pull-right msg-item-icon">
        <span class=""
              dropdown
              dropdown-toggle="true">
          <i class="icon-more-fill msg-item__action msg-item-circle msg-item-more cursor_pointer"
             ng-mouseenter="onMouseEnterOnIcon();"
             ng-mouseleave="onMouseLeaveOnIcon();"></i>
          <!--DROP-DOWN-->
          <ul class="dropdown-menu grey_dropdown dropdown-menu-right" role="menu">
            <li role="presentation" tabindex="-1"
                ng-if="::showAnnouncement"
                ng-click="createAnnouncement()">
              <a role="menuitem" tabindex="-1">
                <i class="icon-bullhorn"></i>
                <span translate>@announcement-create</span>
              </a>
            </li>
            <li role="presentation" tabindex="-1"
                ng-click="createAnnouncement()">
              <a role="menuitem" tabindex="-1">
                <i class="icon-star"></i>
                <span translate>@즐겨찾기로-추가</span>
              </a>
            </li>
            <li role="presentation" tabindex="-1"
                ng-if="::isMyMessage"
                ng-click="deleteMessage()">
              <a role="menuitem" tabindex="-1">
                <i class="fa fa-trash msg-item-action-icon"></i>
                <span translate>@message-delete</span>
              </a>
            </li>
          </ul>
        </span>
      </span>

      <!-- Star -->
      <span class="cursor_pointer pull-right msg-item-star msg-item-icon msg-item-circle"
            ng-class="{'off msg-item__action': !msg.isStarred}"
            ng-mouseenter="onMouseEnterOnIcon();"
            ng-mouseleave="onMouseLeaveOnIcon();"
            star-view="msg.isStarred"
            message-id="{{ msg.message.id }}">
        <i class="icon-star-fill"></i>
      </span>
      <!--&lt;!&ndash;    DELETE ICON APPEARS ON HOVER    &ndash;&gt;-->
      <!--<span class="msg-item__action pull-right cursor_pointer"-->
            <!--ng-mouseenter="onMouseEnterOnIcon();"-->
            <!--ng-mouseleave="onMouseLeaveOnIcon();"-->
            <!--ng-if="isMyMessage"-->
            <!--ng-click="deleteMessage()"-->
            <!--tooltip="{{ '@message-delete' | translate }}" tooltip-append-to-body="true">-->
        <!--<i class="fa fa-trash msg-item-action-icon"></i>-->
      <!--</span>-->

      <!--&lt;!&ndash;    ANNOUNCEMENT ICON APPEARS ON HOVER    &ndash;&gt;-->
      <!--<span class="msg-item__action pull-right cursor_pointer icon-bullhorn msg-item-action-icon"-->
            <!--ng-if="showAnnouncement"-->
            <!--ng-mouseenter="onMouseEnterOnIcon();"  ng-mouseleave="onMouseLeaveOnIcon();"-->
            <!--ng-click="createAnnouncement()"-->
            <!--tooltip="{{ '@announcement-create' | translate }}" tooltip-append-to-body="true">-->
      <!--</span>-->
    </div>
  </div>
</div>

<social-snippet ng-if="hasLinkPreview"></social-snippet>
