<div class="jnd-connect-service-container" id="jnd-connect-available-service">
  <!--JIRA-->
  <div class="integration-service detail">
		<jnd-connect-union-nav></jnd-connect-union-nav>
    <div ng-if="!isInitialized" class="integration-service-container detail-container github" id="jnd-connect-detail-container">
      <jnd-connect-loading></jnd-connect-loading>
    </div>
    <div ng-if="isInitialized" class="integration-service-container detail-container" id="jnd-connect-detail-container">
      <jnd-connect-union-header></jnd-connect-union-header>

      <section class="service-setting introduction collapsed">
        <span class="setting-label">설정방법 안내</span>
        <span class="expand-button pull-right cursor_pointer" ng-click="toggleCollapseGuide();">설정방법 보기</span>

        <div class="setting-contents introduction _guide">

          <div class="introduction-container">
            <h3 class="introduction-title">Webhook이란?</h3>
	            <span class="introduction-desc">
	              웹훅(Webhook)이란 잔디에 잔디가 정한 포맷에 일치하는 데이터를 수신하여 지정된 대화에 메시지 형태로 전송해주는 기능을 말합니다.
	              현재 잔디 커넥트에서 지원하지 않고 있는 서비스라도 웹훅 발신(Outgoing Webhook)을 지원하는 경우 잔디와 연동하여 변동 사항에 대해 메시지를 수신할 수 있습니다.
	            </span>
            <div class="clear"></div>
          </div>

          <div class="introduction-container step">
            <span class="introduction-label shortcuts-label">STEP 1</span>
            <span class="introduction-desc">이 기능을 사용하기 위해서는 HTTP POST request를 아래의 URL로 전송해주시면 됩니다.</span>
            <input class="setting-input form-control" placeholder="" value="https://hooks.jandi.com/services/T03FG">


            <span class="introduction-desc">request에는 반드시 Accept와 Content-Type을 다음과 같이 지정해줘야 합니다.</span>
            <div class="introduction-code-view short">
              <div class="code-line indent-0depth"><span>Accept: application/vnd.tosslab.jandi-v2+json</span></div>
              <div class="code-line indent-0depth"><span>Content-Type: application/json</span></div>
            </div>
	            <span class="introduction-desc">
	              또한 JANDI Webhook은 restful API로 동작하기 때문에 http method를 POST로 하지 않으시면 정상적으로 등록되지 않습니다.
	            </span>
            <div class="clear"></div>
          </div>

          <div class="introduction-container step">
            <span class="introduction-label shortcuts-label">STEP 2</span>
            <span class="introduction-desc">POST request의 포맷은 다음과 같습니다.</span>
            <div class="introduction-code-view">
              <div class="code-line indent-0depth"><span>{</span></div>
              <div class="code-line indent-1depth">
                <span>body: '[[PizzaHouse]](http://url_to_text) You have a new Pizza order.',</span>
                <span class="pull-right">//Body text (Required)</span>
              </div>
              <div class="code-line indent-1depth">
                <span>connectColor: '#FAC11B'</span>
                <span class="pull-right">//Hex code color of attachment bar</span>
              </div>
              <div class="code-line indent-1depth">
                <span>connectInfo: [{</span>
              </div>
              <div class="code-line indent-2depth">
                <span>title: 'Topping',</span>
                <span class="pull-right">//1st attachment area title</span>
              </div>
              <div class="code-line indent-2depth">
                <span>description: 'Pepperoni'</span>
                <span class="pull-right">//1st attachment description</span>
              </div>
              <div class="code-line indent-1depth">
                <span>},</span>
              </div>
              <div class="code-line indent-1depth">
                <span>{</span>
              </div>
              <div class="code-line indent-2depth">
                <span>title: 'Location',</span>
                <span class="pull-right">//2nd attachment area title</span>
              </div>
              <div class="code-line indent-2depth">
                <span>description: 'Empire State Building, 5th Ave, New York',</span>
                <span class="pull-right">//2nd attachment description</span>
              </div>
              <div class="code-line indent-2depth">
                <span>imageUrl: 'http://url_to_text'</span>
                <span class="pull-right">//Image URL</span>
              </div>
              <div class="code-line indent-1depth">
                <span>}</span>
              </div>
              <div class="code-line indent-1depth">
                <span>]</span>
              </div>
              <div class="code-line indent-0depth">
                <span>}</span>
              </div>

            </div>

            <span class="introduction-desc">다음은 curl request의 샘플입니다.</span>
            <div class="introduction-code-view long">
              <div class="code-line indent-0depth"><span>curl -X POST https://webhookURL -d "{body: ''[PizzaHouse](http://url_to_text) You have a new Pizza order.'}"</span></div>
            </div>
            <span class="introduction-desc">이렇게 수신된 메시지는 선택된 대화에 다음과 같이 전송됩니다.</span>
            <img class="example" src="assets/images/jnd-connect-introduction-webhook-example.png" />
            <span class="introduction-desc">더 궁금한 점이 있으시면 <a href="https://jandi.zendesk.com/hc/ko/requests/new" target="_blank">잔디 고객센터</a>로 문의해주시기 바랍니다.</span>

            <div class="clear"></div>
          </div>

        </div>
      </section>

      <section class="service-setting webhook-url">
        <span class="setting-label">Webhook URL</span>
        <input class="setting-input pull-right form-control"
               jnd-input-model="formData.webhookUrl"
               jnd-is-trim="on"
               ng-click="selectInput($event)"
               readonly/>
        <div class="clear"></div>
      </section>

      <section class="service-setting select-conversation jnd-column-10-width">
        <span class="setting-label">연동 토픽 또는 1:1 메시지 선택</span>
        <div class="setting-contents">
          <span class="setting-description">연동 서비스 또는 메시지를 받을 토픽 또는 1:1 메시지를 선택할 수 있습니다. 연동 설정 이후에도 변경 가능합니다.</span>

          <jnd-selectbox-room
              jnd-data-model="formData.roomId"></jnd-selectbox-room>

          <span class="create-new-topic white-button cursor_pointer animate-all" ng-click="openTopicCreateModal()">토픽 생성하기</span>

          <div class="clear"></div>

        </div>
      </section>

      <jnd-connect-union-footer jnd-data="formData.footer"></jnd-connect-union-footer>
    </div>
    <jnd-connect-loading class="big" ng-if="isLoading"></jnd-connect-loading>
  </div>
</div>